# 4장 설계 품질과 트레이드오프

## Reference

- [오브젝트 - 조영호 저자(글)](https://product.kyobobook.co.kr/detail/S000001766367)

설계는 변경을 위해 존재하고 변경에는 어떤 식으로든 비용이 발생한다. 훌륭한 설계란 합리적인 비용안에서 변경을 수용할 수 있는 구조를 만드는 것이다. 적절한 비용 안에서 쉽게 변경할 수 있는 설계는 응집도가 높고 서로 느슨하게 결합되어 있는 요소로 구성된다.

결합도와 응집도를 합리적인 수준으로 유지할 수 있는 중요한 원칙은 객체의 상태가 아니라 객체의 행동에 초점을 맞추는 것이다.

## 설계 트레이드오프

## 캡슐화

상태와 행동을 하나의 객체 안에 모으는 이유는 객체의 내부 구현을 외부로부터 감추기 위해서이다. 구현이란 나중에 변경될 가능성이 높은 어떤 것을 가리킨다. 객체지향의 강력한 이유는 한 곳에서 일어난 변경이 전체 시스템에 영향을 끼치지 않도록 파급 효과를 적절하게 조절할 수 있는 장치를 제공하기 때문이다. 변경될 가능성이 높은 부분을 구현이라고 부르고, 상대적으로 안정적인 부분을 인터페이스라 부른다.

객체지향에서 가장 중요한 원리는 캡슐화이다. 객체자향 설계에서 가장 중요한 원리는 불안정한 구현 세부사항을 안정적인 인터페이스 뒤로 캡슐화하는 것이다.

## 응집도와 결합도

응집도는 모듈에 포함된 내부 요소들이 연관돼 있는 정조를 나타낸다. 모듈 내의 요소들이 하나의 목적을 위해 긴밀히 협력하면 그 모듈은 높은 응집도를 가진다.

결합도는 의존성의 정도를 나타내며 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지를 나타내는 척도이다. 객체지향의 관점에서 결합도는 객체 또는 클래스가 협력에 필요한 적절한 수준의 관계만을 유지하고 있는지를 나타낸다.

좋은 설계란 오늘의 기능을 수행하면서 내일의 변경을 수용할 수 있는 설계이다. 그리고 좋은 설계를 만들기 위해서 높은 응집도와 낮은 결합도를 추구해야 한다.

변경의 관점에서 응집도란 변경이 발생할 때 모듈 내부에서 발생하는 변경의 정도이다.

결합도는 한 모듈이 변경되기 위해서 다른 모듈의 변경 을 요구하는 정도로 측정할 수 있다.

결합도가 높아도 상관없는 경우는 변경된 확률이 아주 적은 모듈에 의존하는 것이다. String이나 ArrayList는 변경될 활률이 매우 낮기에 결합도에 고민할 필요가 없다.

하지만 직접 작성된 코드의 경우 항상 불안전하고 언제라도 변경될 가능성이 높다.

## 캡슐화를 지켜라

캡슐화는 설계의 제 1원리이다. 데이터 중심의 설계가 낮은 응집도와 높은 결합도라는 문제로 몸살을 앓게 된 근본적인 원인은 캡슐화의 원칙을 위반했기 때문이다.

## 데이터 중심 설계의 문제점

- 데이터 중심의 설계는 본질적으로 너무 이른 시기에 데이터에 관해 결정하도록 강요한다.
- 테이터 중심의 설계에서는 협력이라는 문맥을 고려하지 않고 객체를 고립시킨 채 오퍼레이션을 결정한다.